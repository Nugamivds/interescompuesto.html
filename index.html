<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitor de Inversi贸n Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --p: #00ff88; --bg: #0b0f1a; --card: #161c2d; --accent: #38bdf8; }
        
        body { 
            font-family: 'Segoe UI', system-ui, sans-serif; 
            background: var(--bg); 
            color: white; 
            margin: 0; 
            padding: 10px;
            display: flex;
            justify-content: center;
        }

        .container { 
            background: var(--card); 
            padding: 20px; 
            border-radius: 20px; 
            width: 100%; 
            max-width: 1000px; 
            border: 1px solid #2d3748; 
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* T铆tulo adaptable */
        h2 { 
            text-align: center; 
            color: var(--p); 
            text-transform: uppercase; 
            letter-spacing: 1px; 
            font-size: clamp(14px, 5vw, 18px); 
            margin: 0;
            padding-bottom: 15px;
            border-bottom: 1px solid #2d3748;
        }

        /* Layout en dos columnas para PC, una para m贸vil */
        .main-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        @media (min-width: 850px) {
            .main-content { grid-template-columns: 350px 1fr; }
        }

        /* Lado de Controles */
        .controls-side { display: flex; flex-direction: column; gap: 15px; }

        /* Monitor en vivo optimizado */
        .live-display { 
            background: #000; 
            padding: 20px; 
            border-radius: 15px; 
            text-align: center; 
            border: 2px solid var(--p);
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.1);
        }
        .live-amount { 
            font-family: 'Courier New', monospace; 
            font-size: clamp(24px, 6vw, 28px); 
            font-weight: bold; 
            color: var(--p); 
        }

        .section-title { 
            font-size: 11px; 
            color: var(--accent); 
            text-transform: uppercase; 
            letter-spacing: 1px; 
            font-weight: bold;
            margin-bottom: 5px;
        }

        /* Inputs m谩s grandes para m贸viles */
        .input-group { display: flex; flex-direction: column; gap: 5px; }
        label { font-size: 12px; color: #94a3b8; }
        input { 
            width: 100%; 
            padding: 14px; 
            background: #0b0f1a; 
            border: 1px solid #2d3748; 
            color: white; 
            border-radius: 10px; 
            font-size: 16px; 
            outline: none; 
            box-sizing: border-box; 
        }
        input:focus { border-color: var(--p); background: #1a2233; }

        /* Panel de Inyecci贸n */
        .injection-panel { 
            background: #1e293b; 
            padding: 12px; 
            border-radius: 12px; 
            display: flex; 
            gap: 10px; 
        }
        .btn-add { 
            background: var(--p); 
            color: #0b0f1a; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-weight: bold; 
            padding: 0 20px;
            font-size: 16px;
        }

        /* Resultados */
        .res-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .res-box { 
            background: #0b0f1a; 
            padding: 12px; 
            border-radius: 10px; 
            text-align: center; 
            border: 1px solid #2d3748; 
        }
        .res-val { display: block; font-size: 14px; font-weight: bold; color: var(--accent); margin-top: 5px; }

        /* Lado del Gr谩fico */
        .chart-container {
            background: #0f172a;
            padding: 15px;
            border-radius: 15px;
            border: 1px solid #2d3748;
            min-height: 300px;
            position: relative;
        }

        .footer { 
            text-align: center; 
            font-size: 11px; 
            color: #64748b; 
            border-top: 1px solid #2d3748; 
            padding-top: 15px;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>Estrategia de Inversi贸n</h2>
    
    <div class="main-content">
        <div class="controls-side">
            <div class="live-display">
                <div style="font-size: 10px; color: #888; margin-bottom: 5px;">SALDO ACTUAL (ARG)</div>
                <div id="live-money" class="live-amount">$ 0,00</div>
                <div id="acc-today" style="font-size: 14px; color: var(--p); margin-top: 5px; font-weight: bold;">+ $0,00 hoy</div>
            </div>

            <div class="section-title">Inyecci贸n Manual</div>
            <div class="injection-panel">
                <input type="number" id="manual_amount" placeholder="Monto...">
                <button class="btn-add" onclick="injectManual()">Sumar</button>
            </div>

            <div class="section-title">Configuraci贸n</div>
            <div class="input-group">
                <label>Capital Base ($)</label>
                <input type="number" id="cap" value="1272750" oninput="updateAll()">
            </div>
            
            <div class="input-group">
                <label>Aporte Mensual Fijo ($)</label>
                <input type="number" id="apo_mensual" value="0" oninput="updateAll()">
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div class="input-group">
                    <label>TNA %</label>
                    <input type="number" id="tna" value="32" oninput="updateAll()">
                </div>
                <div class="input-group">
                    <label>Plazo (A帽os)</label>
                    <input type="number" id="yrs" value="1" oninput="updateAll()">
                </div>
            </div>

            <div class="res-grid">
                <div class="res-box">
                    <span style="font-size: 10px; color: #94a3b8;">FINAL</span>
                    <span id="v_total" class="res-val">$ 0</span>
                </div>
                <div class="res-box">
                    <span style="font-size: 10px; color: #94a3b8;">GANANCIA</span>
                    <span id="v_int" class="res-val">$ 0</span>
                </div>
            </div>
        </div>

        <div class="chart-container">
            <canvas id="myChart"></canvas>
        </div>
    </div>

    <div class="footer">
         <span id="fecha-ar"></span> | <span id="hora-ar"></span>
    </div>
</div>

<script>
    let myChart;

    function injectManual() {
        let val = parseFloat(document.getElementById('manual_amount').value) || 0;
        let capInput = document.getElementById('cap');
        if (val > 0) {
            capInput.value = (parseFloat(capInput.value) || 0) + val;
            document.getElementById('manual_amount').value = '';
            updateAll();
        }
    }

    function updateAll() {
        const capInicial = parseFloat(document.getElementById('cap').value) || 0;
        const apoMensual = parseFloat(document.getElementById('apo_mensual').value) || 0;
        const tna = (parseFloat(document.getElementById('tna').value) || 0) / 100;
        const yrs = parseFloat(document.getElementById('yrs').value) || 0;

        let meses = Math.floor(yrs * 12) || 1;
        let saldoProy = capInicial;
        let tasaMensual = tna / 12;

        let dataTotal = [capInicial];
        let labels = ["Inicio"];
        let dataAportes = [capInicial];

        for (let i = 1; i <= meses; i++) {
            saldoProy += apoMensual;
            saldoProy += (saldoProy * tasaMensual);
            dataTotal.push(saldoProy);
            dataAportes.push(capInicial + (apoMensual * i));
            labels.push("Mes " + i);
        }

        document.getElementById('v_total').innerText = saldoProy.toLocaleString('es-AR', {style:'currency', currency:'ARS'});
        let totalPuesto = capInicial + (apoMensual * meses);
        document.getElementById('v_int').innerText = (saldoProy - totalPuesto).toLocaleString('es-AR', {style:'currency', currency:'ARS'});

        drawChart(labels, dataTotal, dataAportes);
    }

    function drawChart(labels, total, aportes) {
        const ctx = document.getElementById('myChart').getContext('2d');
        if (myChart) myChart.destroy();
        myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Saldo con Inter茅s',
                    data: total,
                    borderColor: '#00ff88',
                    backgroundColor: 'rgba(0, 255, 136, 0.1)',
                    fill: true,
                    tension: 0.3
                }, {
                    label: 'Solo Aportes',
                    data: aportes,
                    borderColor: '#64748b',
                    borderDash: [5, 5],
                    fill: false
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { labels: { color: 'white', font: { size: 10 } } } },
                scales: {
                    y: { ticks: { color: '#64748b', font: { size: 10 } }, grid: { color: '#1e293b' } },
                    x: { ticks: { color: '#64748b', font: { size: 10 } }, grid: { display: false } }
                }
            }
        });
    }

    function tick() {
        const cap = parseFloat(document.getElementById('cap').value) || 0;
        const tna = (parseFloat(document.getElementById('tna').value) || 0) / 100;
        const options = { timeZone: 'America/Argentina/Buenos_Aires', hour12: false };
        const argNow = new Date(new Date().toLocaleString('en-US', options));

        document.getElementById('fecha-ar').innerText = argNow.toLocaleDateString('es-AR');
        document.getElementById('hora-ar').innerText = argNow.toLocaleTimeString('es-AR');

        let diaria = (cap * tna) / 365;
        let segundosHoy = (argNow.getHours() * 3600) + (argNow.getMinutes() * 60) + argNow.getSeconds();
        let acumulado = segundosHoy * (diaria / 86400);
        
        document.getElementById('live-money').innerText = (cap + acumulado).toLocaleString('es-AR', {
            style: 'currency', currency: 'ARS', minimumFractionDigits: 3
        });
        document.getElementById('acc-today').innerText = "+ $" + acumulado.toLocaleString('es-AR', {minimumFractionDigits: 2}) + " hoy";
    }

    setInterval(tick, 1000);
    updateAll();
</script>

</body>
</html>
